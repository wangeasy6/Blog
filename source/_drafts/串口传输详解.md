---
title: 串口传输详解
toc: true
categories:
  - Technology
tags:
  - 嵌入式
---

串行接口简称串口，也称COM接口（Cluster Communication Port）。

串行接口 (Serial Interface) 是指数据一位一位地按顺序传送，其特点是通信线路简单，只要2条传输线就可以实现双向通信，从而大大降低了成本，特别适用于远距离通信，但传送速度较慢。

串行通讯的距离可以从几米到几千米。根据数据的传送方向，串行通讯可以进一步分为单工、半双工和全双工三种。

串行接口按电气标准及协议来分包括RS-232、RS-422、RS485等。以上标准只对接口的电气特性做出规定，不涉及接插件、电缆或协议。

<!--more-->

<br/>


## 简介

### RS-232

也称标准串口，最常用的一种串行通讯接口。它是在1970年由美国电子工业协会（EIA）联合贝尔系统、调制解调器厂家及计算机终端生产厂家共同制定的用于串行通讯的标准。现在通用的准确来说是RS-232C标准，RS（Recommended **S**tandard）代表推荐标准，232是标识号，C代表RS232的第三次修改（1969年），在这之前，还有RS232B、RS232A。

传统的RS-232接口标准有22根线，采用标准DB-25连接器。后来IBM的PC机将RS-232简化成了DB-9连接器，从而成为事实标准。而工业控制的RS-232口一般只使用RXD、TXD、GND三条线。

RS-232采取不平衡传输方式，即所谓单端通讯。由于其发送电平与接收电平的差仅为2V至3V左右，所以其共模抑制能力差，再加上双绞线上的分布电容，其传送距离最大为约15米，最高速率为20kb/s。RS-232是为点对点（即只用一对收、发设备）通讯而设计的，其驱动器负载为3～7kΩ。所以RS-232适合本地设备之间的通信。

### RS-422

标准全称是“平衡电压数字接口电路的电气特性”，它定义了接口电路的特性。典型的RS-422是四线接口。实际上还有一根信号地线，共5根线。由于接收器采用高输入阻抗和发送驱动器比RS232更强的驱动能力，故允许在相同传输线上连接多个接收节点，最多可接10个节点。即一个主设备（Master），其余为从设备（Slave），从设备之间不能通信，所以RS-422支持点对多的双向通信。接收器输入阻抗为4k，故发端最大负载能力是10×4k+100Ω（终接电阻）。RS-422四线接口由于采用单独的发送和接收通道，因此不必控制数据方向，各装置之间任何必须的信号交换均可以按软件方式（XON/XOFF握手）或硬件方式（一对单独的双绞线）实现。

RS-422的最大传输距离为1219米，最大传输速率为10Mb/s。其平衡双绞线的长度与传输速率成反比，在100kb/s速率以下，才可能达到最大传输距离。只有在很短的距离下才能获得最高速率传输。一般100米长的双绞线上所能获得的最大传输速率仅为1Mb/s。

### RS-485

是从RS-422基础上发展而来的，所以RS-485许多电气规定与RS-422相仿。如都采用平衡传输方式，都需要在传输线上接终接电阻等。RS-485可以采用二线与四线方式，二线制可实现真正的多点双向通信，而采用四线连接时，与RS-422一样只能实现点对多的通信，即只能有一个主（Master）设备，其余为从设备，但它比RS-422有改进，无论四线还是二线连接方式总线上可多接到32个设备。

RS-485与RS-422的不同还在于其共模输出电压是不同的，RS-485是-7V至+12V之间，而RS-422在-7V至+7V之间，RS-485接收器最小输入阻抗为12kΩ、RS-422是4kΩ；由于RS-485满足所有RS-422的规范，所以RS-485的驱动器可以在RS-422网络中应用。

RS-485与RS-422一样，其最大传输距离约为1219米，最大传输速率为10Mb/s。平衡双绞线的长度与传输速率成反比，在100kb/s速率以下，才可能使用规定最长的电缆长度。只有在很短的距离下才能获得最高速率传输。一般100米长双绞线最大传输速率仅为1Mb/s。

## 标准细节

### RS-232

#### 连接器

RS-232指定了20个不同的信号连接，由25个D-sub（微型D类）管脚构成的DB-25连接器。很多设备只是用了其中的一小部分管脚，出于节省资金和空间的考虑，不少机器采用较小的连接器，特别是9管脚的D-sub或者是DE-9型连接器被广泛使用绝大多数自IBM的AT机之后的PC机和其他许多设备上。DB-25和DE-9型的连接器在大部分设备上是雌型，但不是所有的都是这样。

除此之外，EIA/TIA 561标准规定了一种管脚分配的方法，但是由Dave Yost发明的被广泛使用在Unix计算机上的Yost串连设备配线标准（"Yost Serial Device Wiring Standard"）以及其他很多设备都没有采用上述任一种连线标准。

```
           DE-9 Male（Pin Side）                   DE-9 Female （Pin Side）
             -------------                          -------------
             \ 1 2 3 4 5 /                          \ 5 4 3 2 1 /
              \ 6 7 8 9 /                            \ 9 8 7 6 /
               ---------                              ---------
```

|        信号         | DB-25 | DE-9 | EIA/TIA 561 | Yost |
| :-----------------: | :---: | :--: | :---------: | :--: |
|      公共接地       |   7   |  5   |      4      | 4,5  |
| 发送数据（TD、TXD） |   2   |  3   |      6      |  3   |
| 接受数据（RD、RXD） |   3   |  2   |      5      |  6   |
| 数据终端准备（DTR） |  20   |  4   |      3      |  2   |
|  数据准备好（DSR）  |   6   |  6   |      1      |  7   |
|   请求发送（RTS）   |   4   |  7   |      8      |  1   |
|   清除发送（CTS）   |   5   |  8   |      7      |  8   |
| 数据载波检测（DCD） |   8   |  1   |      2      |  7   |
|   振铃指示（RI）    |  22   |  9   |      1      |  －  |

| 脚位 | 简写 |        意义         |                说明                |
| :--: | :--: | :-----------------: | :--------------------------------: |
| Pin1 | DCD  | Data Carrier Detect | 调制解调器通知电脑有载波被侦测到。 |
| Pin2 | RXD  |      Receiver       |             接收资料。             |
| Pin3 | TXD  |      Transmit       |             发送资料。             |
| Pin4 | DTR  | Data Terminal Ready |  电脑告诉调制解调器可以进行传输。  |
| Pin5 | GND  |       Ground        |               地线。               |
| Pin6 | DSR  |   Data Set Ready    |  调制解调器告诉电脑一切准备就绪。  |
| Pin7 | RTS  |   Request To Send   |   电脑要求调制解调器将资料提交。   |
| Pin8 | CTS  |    Clear To Send    | 调制解调器通知电脑可以传资料过来。 |
| Pin9 |  RI  |   Ring Indicator    |   调制解调器通知电脑有电话进来。   |

#### 机械特性

#### 电气特性

#### 逻辑电平

RS-232标准中定义了逻辑一和逻辑零电压级数，以及标准的传输速率和连接器类型。信号大小在正的和负的3－15v之间。RS-232规定接近零的电平是无效的，逻辑一规定为负电平，有效负电平的信号状态称为传号marking，它的功能意义为OFF，逻辑零规定为正电平，有效正电平的信号状态称为空号spacing，它的功能意义为ON。电平有效范围在±3至±15伏之间。根据设备供电电源的不同，±5、±10、±12和±15这样的电平都是可能的。

#### 信号功能

#### 发送过程

最常用的编码格式是异步起停（asynchronous start-stop）格式，它使用一个起始比特后面紧跟7或8个数据比特（bit），然后是可选的奇偶校验比特，最后是一或两个停止比特。所以发送一个字符至少需要10比特，带来的一个好的效果是使全部的传输速率，发送信号的速率以10划分。一个最平常的代替异步起停方式的是使用高级数据链路控制协议（HDLC）。

#### 通讯距离

9600波特率下建议在13米以内。

#### 通讯速率

缺省常用的是 9600 bps，常见的还有 1200 2400 4800 19200 38400等。波特率越大，传输速度越快，但稳定的传输距离越短，抗干扰能力越差。


### USB转RS-232

### RS-232转TTL

### RS-232转RS-485